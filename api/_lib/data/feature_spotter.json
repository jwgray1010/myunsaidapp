{
  "version": "1.0.0",
  "globals": {
    "flags": "i",
    "maxInputChars": 2000,
    "timeoutMs": 500,
    "dedupeWindowMs": 5000,
    "matchLimitPerFeature": 3
  },
  "scoringDefaults": {
    "baseWeight": 0.01,
    "positionBoost": {
      "start": 0.02,
      "end": 0.015,
      "caps": 0.01,
      "repeat": 0.005
    },
    "cooccurrenceBoost": {
      "withNegation": 0.03,
      "withSarcasm": 0.025,
      "withEmoji": 0.01
    }
  },
  "features": [
    {
      "id": "FS_ABSOLUTES",
      "description": "Absolute language patterns (always, never, every time)",
      "patterns": [
        "\\b(always|never|every time|constantly|forever)\\b",
        "\\b(every single|each and every|without exception)\\b",
        "\\b(all the time|every damn time|every fucking time)\\b"
      ],
      "buckets": ["escalation_language", "cognitive_distortion"],
      "weights": {
        "tone.alert": 0.04,
        "tone.caution": 0.02
      },
      "attachmentHints": {
        "anxious": 0.03,
        "disorganized": 0.02
      }
    },
    {
      "id": "FS_ESCALATION_PUNCT",
      "description": "Escalating punctuation (multiple exclamation marks, ALL CAPS)",
      "patterns": [
        "!{2,}",
        "[A-Z]{4,}",
        "\\?{2,}",
        "[.]{3,}"
      ],
      "buckets": ["escalation_language", "emotional_intensity"],
      "weights": {
        "tone.alert": 0.03,
        "tone.caution": 0.015
      },
      "attachmentHints": {
        "anxious": 0.025,
        "disorganized": 0.02
      }
    },
    {
      "id": "FS_BLAME_ASSIGNMENT",
      "description": "Direct blame and accusatory language",
      "patterns": [
        "\\b(you always|you never|you're the one)\\b",
        "\\b(it's your fault|you did this|you made me)\\b",
        "\\b(you're so|you can't even|you don't care)\\b"
      ],
      "buckets": ["blame_patterns", "escalation_language"],
      "weights": {
        "tone.alert": 0.05,
        "tone.caution": 0.02
      },
      "attachmentHints": {
        "anxious": 0.04,
        "disorganized": 0.03
      }
    },
    {
      "id": "FS_REPAIR_ATTEMPTS",
      "description": "Attempts to repair or de-escalate conversation",
      "patterns": [
        "\\b(sorry|my bad|i was wrong)\\b",
        "\\b(let's start over|can we try again|i didn't mean)\\b",
        "\\b(i love you|we're on the same team|together)\\b"
      ],
      "buckets": ["repair_language", "positive_engagement"],
      "weights": {
        "tone.clear": 0.04,
        "tone.caution": -0.02
      },
      "attachmentHints": {
        "secure": 0.03,
        "anxious": 0.015
      }
    },
    {
      "id": "FS_BOUNDARY_LANGUAGE",
      "description": "Boundary setting and self-advocacy",
      "patterns": [
        "\\b(i need|i want|i feel)\\b",
        "\\b(please stop|that's not okay|i don't like)\\b",
        "\\b(my boundary is|i'm not comfortable|i need space)\\b"
      ],
      "buckets": ["boundary_setting", "self_advocacy"],
      "weights": {
        "tone.clear": 0.03,
        "tone.caution": 0.01
      },
      "attachmentHints": {
        "secure": 0.04,
        "avoidant": 0.02
      }
    },
    {
      "id": "FS_EMOTIONAL_FLOODING",
      "description": "Signs of emotional overwhelm or flooding",
      "patterns": [
        "\\b(can't think|overwhelmed|too much)\\b",
        "\\b(losing it|breaking down|falling apart)\\b",
        "\\b(can't handle|shutting down|need a break)\\b"
      ],
      "buckets": ["emotional_flooding", "self_awareness"],
      "weights": {
        "tone.caution": 0.04,
        "tone.alert": 0.02
      },
      "attachmentHints": {
        "anxious": 0.03,
        "disorganized": 0.04
      }
    },
    {
      "id": "FS_FUTURE_PLANNING",
      "description": "Forward-looking collaborative language",
      "patterns": [
        "\\b(let's plan|how about we|what if we)\\b",
        "\\b(next time|going forward|in the future)\\b",
        "\\b(we could try|maybe we can|let's work on)\\b"
      ],
      "buckets": ["collaborative_planning", "positive_engagement"],
      "weights": {
        "tone.clear": 0.05,
        "tone.caution": -0.01
      },
      "attachmentHints": {
        "secure": 0.04,
        "anxious": 0.02
      }
    },
    {
      "id": "FS_AVOIDANCE_PATTERNS",
      "description": "Avoidance and deflection language",
      "patterns": [
        "\\b(whatever|fine|doesn't matter)\\b",
        "\\b(i don't care|not my problem|not interested)\\b",
        "\\b(let's just drop it|forget it|moving on)\\b"
      ],
      "buckets": ["avoidance_patterns", "disengagement"],
      "weights": {
        "tone.caution": 0.03,
        "tone.alert": 0.015
      },
      "attachmentHints": {
        "avoidant": 0.04,
        "disorganized": 0.02
      }
    }
  ],
  "noticingsMap": {
    "escalation_language": "I noticed some strong language that might escalate tension",
    "cognitive_distortion": "Consider if 'always' or 'never' statements reflect the full picture",
    "emotional_intensity": "High emotional intensity detected - might benefit from a pause",
    "blame_patterns": "Focus on 'I' statements rather than 'you' accusations",
    "repair_language": "Great job taking responsibility and trying to repair",
    "positive_engagement": "I love the collaborative spirit in your message",
    "boundary_setting": "Clear boundary communication - that's healthy!",
    "self_advocacy": "Good self-advocacy while staying respectful",
    "emotional_flooding": "It sounds like you might be feeling overwhelmed",
    "collaborative_planning": "Nice forward-thinking approach to solving this together",
    "avoidance_patterns": "I notice some avoidance - staying engaged might help",
    "disengagement": "Consider re-engaging rather than withdrawing"
  },
  "aggregation": {
    "decayDays": 7,
    "capPerDay": 5.0,
    "noiseFloor": 0.001,
    "cooldownMsPerBucket": {
      "escalation_language": 15000,
      "cognitive_distortion": 10000,
      "emotional_intensity": 12000,
      "blame_patterns": 20000,
      "repair_language": 5000,
      "positive_engagement": 3000,
      "boundary_setting": 8000,
      "self_advocacy": 8000,
      "emotional_flooding": 15000,
      "collaborative_planning": 5000,
      "avoidance_patterns": 10000,
      "disengagement": 12000
    }
  },
  "runtime": {
    "safeOrder": [
      "repair_language",
      "positive_engagement",
      "collaborative_planning",
      "boundary_setting",
      "self_advocacy",
      "emotional_flooding",
      "avoidance_patterns",
      "cognitive_distortion",
      "escalation_language",
      "blame_patterns",
      "disengagement"
    ],
    "conflictResolution": {
      "mergeSameBucket": true,
      "preferPositiveWhenTied": true,
      "maxNoticingsPerMessage": 2
    }
  }
}