{
  "version": "1.3.1",
  "notes": "Canonical category alignment + aliases. Keeps 1.3.0 behavior while mapping legacy keys (validation, de-escalation) to empathy_builders/active_listening and emergency_deescalation/emotional_regulation. Adds optional canonical categories used elsewhere (safety_check, escalation_detection, breathing_techniques, communication_style_markers, etc.).",
  "settings": {
    "normalize": {
      "casefold": true,
      "strip_punct": true,
      "lemmatize": true,
      "unicode_nfkc": true,
      "collapse_whitespace": true,
      "preserve_emojis": true,
      "apostrophes": ["'", "‚Äô", "`"],
      "diacritics": "strip",
      "elongation_collapse": { "enabled": true, "max_repeat": 3 },
      "spelling_variants": { "enabled": true, "british_to_american": true }
    },
    "languages": {
      "default": "en",
      "detect": true,
      "supported": ["en","es","fr","de","pt","it"],
      "fallback": "en",
      "xlang_heuristics": {
        "mirror_lexemes": true,
        "transliterate": true,
        "shared_emojis": true
      }
    },
    "matchMode": "hybrid",
    "thresholds": {
      "exact": 0.90,
      "regex": 0.82,
      "spacy": 0.76,
      "embedding": 0.73,
      "cluster_fire": 0.78,
      "irony_override": 0.65,
      "xlang_penalty": 0.03
    },
    "negation": {
      "window": 4,
      "invertTone": true,
      "penalty": 0.25,
      "denylist": ["not only ... but", "not because", "not just ... also"]
    },
    "context": {
      "turn_window": 6,
      "speaker_tracking": true,
      "carry_over_intensity": 0.15,
      "cooldown_ms": 250,
      "cooldown_by_category": { "conflict": 350, "risk": 500, "validation": 150, "empathy_builders": 150 }
    },
    "reverseRegisterRule": {
      "enabled": true,
      "signals": ["affiliative insult", "banter markers", "emoji soften"],
      "dampenMultiplier": 0.6,
      "banter_markers": ["jk","lol","lmao","üòÇ","üòÖ","üòâ","j/k","kidding"]
    },
    "ironySarcasm": {
      "enabled": true,
      "signals": {
        "scare_quotes": true,
        "slash_s": true,
        "ellipsis_pause": true,
        "emoji_eye_roll": ["üôÑ","üòí"],
        "contrastive_markers": ["yeah right","sure, jan"]
      },
      "boost_contempt": 0.08,
      "dampen_literal_toxicity": 0.05
    },
    "features": {
      "caps_ratio_weight": 0.06,
      "exclaim_count_weight": 0.05,
      "absolute_terms": ["always","never","every","nothing","no one","everyone"],
      "absolutizer_weight": 0.07,
      "question_barrage_weight": 0.06,
      "emoji_softeners": ["üôÇ","üòä","ü´∂","üôè","‚ú®","üíô"],
      "emoji_harsh": ["üíÄ","ü§°","üñï","üî•","‚öîÔ∏è"]
    }
  },

  "aliases": {
    "categories": {
      "validation": ["empathy_builders","active_listening"],
      "de-escalation": ["emergency_deescalation","emotional_regulation"]
    }
  },

  "weights": {
    "categoryWeights": {
      "boundary": 1.03,
      "validation": 1.10,
      "de-escalation": 1.05,
      "plan": 1.00,
      "conflict": 1.00,
      "repair": 1.00,
      "distancing": 1.00,
      "risk": 1.07,
      "jealousy": 1.02,

      "empathy_builders": 1.10,
      "active_listening": 1.06,
      "emergency_deescalation": 1.05,
      "emotional_regulation": 1.03,
      "safety_check": 1.04,
      "escalation_detection": 1.02,
      "breathing_techniques": 1.02,
      "communication_style_markers": 1.00,
      "relationship_stage_indicators": 1.00,
      "attachment_triggers": 1.00,
      "codependency_patterns": 1.00,
      "independence_patterns": 1.00,
      "cultural_context_patterns": 1.00,
      "perspective_taking": 1.00
    },
    "profiles": {
      "high_sensitivity": { "sarcasmPenalty": 1.3, "negationPenalty": 1.2, "ironySensitivity": 1.2 },
      "low_reactivity":   { "intensityBoost": 0.9, "cooldownFactor": 1.1 },
      "default":          { "intensityBoost": 1.0 }
    }
  },

  "routing": {
    "matrix": {
      "conflict":      ["boundary","emergency_deescalation","empathy_builders","repair"],
      "risk":          ["empathy_builders","boundary","emergency_deescalation","plan"],
      "jealousy":      ["empathy_builders","plan","boundary"],
      "distancing":    ["empathy_builders","emergency_deescalation","plan"],
      "validation":    ["plan","repair"],
      "boundary":      ["plan","empathy_builders"]
    },
    "policy": {
      "max_actions": 2,
      "prefer_clear_over_alert_when": ["apology","empathy_builders","emergency_deescalation"],
      "block_escalate_if": ["gaslighting","ultimatum"]
    }
  },

  "confidenceCalibration": {
    "blend": { "regex": 0.35, "spacy": 0.20, "embedding": 0.35, "features": 0.10 },
    "feature_bonus_caps": 0.02,
    "feature_bonus_abs": 0.03,
    "banter_dampen": 0.08,
    "cooldown_decay": 0.06
  },

  "links": {
    "attachmentOverrides": {
      "anxious":      { "cautionBoost": 0.10, "alertDampen": 0.05 },
      "avoidant":     { "clearBoost": 0.10,  "cautionBoost": 0.05 },
      "disorganized": { "alertBoost": 0.10, "cautionBoost": 0.10 },
      "secure":       { "clearBoost": 0.15 }
    },
    "userPreferenceCategories": {
      "boundary": 0.10,
      "validation": 0.10,
      "de-escalation": 0.05,
      "empathy_builders": 0.10,
      "emergency_deescalation": 0.05
    }
  },

  "actionPolicies": {
    "on_detect": {
      "conflict":   ["suggest_rewrite_secure", "offer_options_menu"],
      "risk":       ["suggest_evidence_check","offer_pause_timer"],
      "validation": ["mirror_then_ask"],
      "boundary":   ["format_boundary_secure"],
      "repair":     ["micro_apology_template"]
    },
    "templates": {
      "rewrite_secure": "I-statements: feeling + need + doable request, no global labels.",
      "options_menu": "Offer 2‚Äì3 concrete choices with time anchors.",
      "boundary_secure": "Limit + rationale + alternative.",
      "micro_apology": "Behavior ‚Üí impact ‚Üí repair step; avoid 'but'."
    }
  },

  "clusterSchema": {
    "id": "string",
    "key": "string",
    "category": "conflict|repair|plan|validation|boundary|distancing|jealousy|risk|de-escalation|empathy_builders|active_listening|emergency_deescalation|emotional_regulation|safety_check",
    "description": "short explainer",
    "toneAffinities": { "alert": "0..1", "caution": "0..1", "clear": "-1..1" },
    "attachmentAdjustments": { "secure": "delta", "anxious": "delta", "avoidant": "delta", "disorganized": "delta" },
    "contextLinks": ["CTX_* ids"],
    "match": {
      "lexical": ["literal variants"],
      "regex": ["patterns"],
      "spacyPatterns": [[{ "LOWER": "token" }]],
      "semanticTags": ["concept tags"],
      "embeddingHints": ["seed phrases"],
      "xlang": { "es": ["..."], "fr": ["..."] }
    },
    "negationSensitive": "bool",
    "intensityHooks": ["amplifiers/absolutizers/etc"],
    "rewriteCues": { "secureFix": ["brief tips"], "examples": ["example rewrite"] },
    "crossRefs": {
      "triggerwordsTags": ["tags used in tone_triggerwords.json"],
      "therapyAdviceTags": ["tags used to filter therapy_advice.json"],
      "intensityModifierHints": ["map to intensity layer hooks"]
    },
    "weights": { "base": "0..1", "multiplierProfile": "profile key" },
    "tests": [{ "text": "example", "expect": { "tone": "alert", "context": "conflict" } }]
  },

  "contexts": [
    { "id": "CTX_CONFLICT", "signals": ["second-person blame","absolutizers"], "bias": { "alert": 0.08 } },
    { "id": "CTX_ESCALATION", "signals": ["caps","exclaims>2","threat_terms"], "bias": { "alert": 0.12 } },
    { "id": "CTX_REPAIR", "signals": ["apology_markers","future_plan"], "bias": { "clear": 0.10 } },
    { "id": "CTX_RISK", "signals": ["reality_invalidation","threats"], "bias": { "alert": 0.15 } },
    { "id": "CTX_PLANNING", "signals": ["time_tokens","dates","numbers"], "bias": { "clear": 0.08 } },
    { "id": "CTX_RUPTURE", "signals": ["withdrawal","silence_markers"], "bias": { "caution": 0.07 } },
    { "id": "CTX_MICRO_APOLOGY", "signals": ["sorry","my mistake"], "bias": { "clear": 0.06 } },
    { "id": "CTX_INSECURITY", "signals": ["comparisons","triangulation"], "bias": { "caution": 0.05 } },
    { "id": "CTX_BOUNDARY", "signals": ["limit_setting","request_stop"], "bias": { "clear": 0.08 } },
    { "id": "CTX_DISCLOSURE", "signals": ["self_disclosure"], "bias": { "caution": 0.04 } }
  ],

  "clusters": [
    {
      "id": "SEM_BLAME",
      "key": "blame",
      "category": "conflict",
      "description": "Assigning fault to the other person.",
      "toneAffinities": { "alert": 0.25, "caution": 0.05, "clear": -0.05 },
      "attachmentAdjustments": { "secure": 0.00, "anxious": 0.05, "avoidant": 0.02, "disorganized": 0.06 },
      "contextLinks": ["CTX_CONFLICT","CTX_ESCALATION"],
      "match": {
        "lexical": ["fault","your fault","your doing","because of you","this is on you","you made me","all on you","your mistake","you caused this","you did this"],
        "regex": ["\\b(your|ur)\\s+(fault|doing|mess|mistake)\\b","\\bbecause of you\\b","\\bthis\\s+is\\s+on\\s+you\\b","\\byou\\s+(caused|made)\\s+this\\b"],
        "spacyPatterns": [[{ "LOWER": {"IN":["your","ur"]}}, { "LOWER": {"IN":["fault","doing","mess","mistake"]}}], [{ "LOWER":"because"},{ "LOWER":"of"},{ "LOWER":"you"}]],
        "semanticTags": ["assigning_cause","externalization"],
        "embeddingHints": ["it's your fault","this happened because of you"],
        "xlang": { "es": ["es tu culpa","por tu culpa"], "fr": ["c‚Äôest de ta faute","√† cause de toi"] }
      },
      "negationSensitive": true,
      "intensityHooks": ["always","never","!!!","caps"],
      "rewriteCues": {
        "secureFix": [
          "Shift to impact over blame (I-feel + need/request).",
          "Name one behavior + one effect; avoid global attributions."
        ],
        "examples": [
          "Instead of ‚ÄúThis is your fault‚Äù ‚Üí ‚ÄúI felt stuck when X happened. Next time could we Y?‚Äù"
        ]
      },
      "crossRefs": {
        "triggerwordsTags": ["blame","accusation"],
        "therapyAdviceTags": ["repair","emergency_deescalation","impact-over-intent"],
        "intensityModifierHints": ["absolutizer","repeater"]
      },
      "weights": { "base": 1.0, "multiplierProfile": "high_sensitivity" },
      "tests": [{ "text": "This is your fault.", "expect": { "tone": "alert", "context": "conflict" } }]
    },

    {
      "id": "SEM_WITHDRAW",
      "key": "withdraw",
      "category": "distancing",
      "description": "Disengaging or shutting down.",
      "toneAffinities": { "alert": 0.05, "caution": 0.20, "clear": -0.05 },
      "attachmentAdjustments": { "secure": -0.02, "anxious": 0.06, "avoidant": 0.10, "disorganized": 0.06 },
      "contextLinks": ["CTX_RUPTURE","CTX_CONFLICT"],
      "match": {
        "lexical": ["pull away","shut down","go quiet","check out","stonewall","go silent","disappear on me","ghosting","I can't do this right now"],
        "regex": ["\\b(shut\\s*down|go\\s+quiet|check\\s+out|stonewall)\\b","\\b(pull(?:ing)?\\s+away)\\b"],
        "spacyPatterns": [[{ "LOWER":"go"},{ "LOWER":{"IN":["quiet","silent"]}}]],
        "semanticTags": ["withdrawal","shutdown"],
        "embeddingHints": ["I‚Äôm shutting down","I checked out of the convo"],
        "xlang": { "es": ["me cierro","me callo","me desconecto"], "fr": ["je me ferme","je me tais","je d√©croche"] }
      },
      "negationSensitive": false,
      "intensityHooks": ["ellipsis","long pause markers"],
      "rewriteCues": {
        "secureFix": [
          "Name the need for a brief pause and give a return time.",
          "Signal care + commitment before exiting."
        ],
        "examples": [
          "‚ÄúI‚Äôm getting flooded. Can we pause 20 minutes and pick this back up?‚Äù"
        ]
      },
      "crossRefs": {
        "triggerwordsTags": ["withdrawal","stonewalling"],
        "therapyAdviceTags": ["co-regulation","timed-pause","repair"],
        "intensityModifierHints": ["ellipsis_softener"]
      },
      "weights": { "base": 0.95, "multiplierProfile": "low_reactivity" },
      "tests": [{ "text": "I‚Äôm shutting down.", "expect": { "tone": "caution", "context": "rupture" } }]
    },

    {
      "id": "SEM_CONTEMPT",
      "key": "contempt",
      "category": "conflict",
      "description": "Mockery or superiority signals.",
      "toneAffinities": { "alert": 0.35, "caution": 0.05, "clear": -0.08 },
      "attachmentAdjustments": { "secure": 0.00, "anxious": 0.05, "avoidant": 0.04, "disorganized": 0.08 },
      "contextLinks": ["CTX_ESCALATION","CTX_CONFLICT"],
      "match": {
        "lexical": ["pathetic","ridiculous","obviously","whatever (dismissive)","you‚Äôre impossible","grow up","give me a break"],
        "regex": ["\\b(pathetic|ridiculous|grow\\s+up)\\b","\\bwhatever\\b"],
        "spacyPatterns": [[{ "LOWER":"you‚Äôre"},{ "LOWER":"impossible"}]],
        "semanticTags": ["mockery","superiority"],
        "embeddingHints": ["eye roll tone","ugh whatever"],
        "xlang": { "es": ["pat√©tico","rid√≠culo","ya claro"], "fr": ["path√©tique","ridicule","bien s√ªr (ironique)"] }
      },
      "negationSensitive": false,
      "intensityHooks": ["sarcasm","caps","!!!"],
      "rewriteCues": {
        "secureFix": [
          "Drop evaluations; describe a specific moment/behavior.",
          "Ask for one doable change."
        ],
        "examples": ["‚ÄúWhen X happened I felt Y. Could we try Z next time?‚Äù"]
      },
      "crossRefs": {
        "triggerwordsTags": ["contempt","insult"],
        "therapyAdviceTags": ["emergency_deescalation","specific-request"],
        "intensityModifierHints": ["sarcasm_flag","absolutizer"]
      },
      "weights": { "base": 1.05, "multiplierProfile": "high_sensitivity" }
    },

    {
      "id": "SEM_ULTIMATUM",
      "key": "ultimatum",
      "category": "conflict",
      "description": "If-then threats; leverage.",
      "toneAffinities": { "alert": 0.40, "caution": 0.00, "clear": -0.10 },
      "attachmentAdjustments": { "secure": 0.00, "anxious": 0.05, "avoidant": 0.03, "disorganized": 0.07 },
      "contextLinks": ["CTX_ESCALATION","CTX_BOUNDARY"],
      "match": {
        "lexical": ["if you don‚Äôt‚Ä¶, then‚Ä¶","do this or else","last chance","I‚Äôm done if‚Ä¶"],
        "regex": ["\\bif\\s+you\\s+don'?t.*\\bthen\\b","\\b(or\\s+else)\\b","\\blast\\s+chance\\b"],
        "spacyPatterns": [[{ "LOWER":"if"},{ "LOWER":"you"},{ "LOWER":{"REGEX":"don'?t"} }]],
        "semanticTags": ["conditional_threat"],
        "embeddingHints": ["do this or I‚Äôm done"],
        "xlang": { "es": ["si no lo haces","o si no"], "fr": ["si tu ne","sinon"] }
      },
      "negationSensitive": false,
      "intensityHooks": ["caps","exclamation"],
      "rewriteCues": {
        "secureFix": [
          "Replace threat with boundary + consequence you control.",
          "Offer a collaborative path first."
        ],
        "examples": ["‚ÄúIf we can‚Äôt align by Friday, I‚Äôll pause the trip planning.‚Äù"]
      },
      "crossRefs": {
        "triggerwordsTags": ["threat","ultimatum"],
        "therapyAdviceTags": ["boundary-secure","options-menu"],
        "intensityModifierHints": ["absolutizer"]
      },
      "weights": { "base": 1.1, "multiplierProfile": "high_sensitivity" }
    },

    {
      "id": "SEM_APOLOGY",
      "key": "apology",
      "category": "repair",
      "description": "Ownership + remorse + repair.",
      "toneAffinities": { "alert": -0.10, "caution": -0.05, "clear": 0.25 },
      "attachmentAdjustments": { "secure": 0.05, "anxious": 0.02, "avoidant": 0.02, "disorganized": 0.02 },
      "contextLinks": ["CTX_REPAIR","CTX_MICRO_APOLOGY"],
      "match": {
        "lexical": ["I‚Äôm sorry","I apologize","I didn‚Äôt mean that","my mistake","I own that","I was wrong"],
        "regex": ["\\b(i'?m\\s+sorry|i\\s+apologize|my\\s+mistake|i\\s+was\\s+wrong)\\b"],
        "spacyPatterns": [[{ "LOWER":{"IN":["sorry","apologize"]}}]],
        "semanticTags": ["repair_initiation"],
        "embeddingHints": ["owning impact","taking responsibility"]
      },
      "negationSensitive": true,
      "intensityHooks": ["specificity bonus","offer-to-repair"],
      "rewriteCues": {
        "secureFix": ["Behavior ‚Üí impact ‚Üí next step; avoid 'but'."],
        "examples": ["‚ÄúI‚Äôm sorry I raised my voice. I see it shut you down. I‚Äôll pause next time.‚Äù"]
      },
      "crossRefs": {
        "triggerwordsTags": ["apology","repair"],
        "therapyAdviceTags": ["micro-apology","repair-plan","validation"],
        "intensityModifierHints": []
      },
      "weights": { "base": 1.0, "multiplierProfile": "low_reactivity" }
    },

    {
      "id": "SEM_REASSURE",
      "key": "reassurance",
      "category": "empathy_builders",
      "legacyCategory": "validation",
      "description": "Care/commitment signals.",
      "toneAffinities": { "alert": -0.15, "caution": -0.05, "clear": 0.30 },
      "attachmentAdjustments": { "secure": 0.06, "anxious": 0.08, "avoidant": 0.02, "disorganized": 0.04 },
      "contextLinks": ["CTX_REPAIR","CTX_CONFLICT"],
      "match": {
        "lexical": ["I‚Äôm here","I‚Äôve got you","we‚Äôre a team","we‚Äôll figure it out","you matter to me","I want this to work"],
        "regex": ["\\b(i'?m\\s+here|we'?ll\\s+figure\\s+it\\s+out|you\\s+matter\\s+to\\s+me)\\b"],
        "spacyPatterns": [[{ "LOWER":"we"},{ "LOWER":"got"},{ "LOWER":"this"}]],
        "semanticTags": ["safety_signal"],
        "embeddingHints": ["commitment signal","care language"]
      },
      "negationSensitive": false,
      "intensityHooks": ["future-orientation bonus"],
      "rewriteCues": { "secureFix": ["Add one concrete next step with time anchor."],
        "examples": ["‚ÄúWe‚Äôll figure it out after dinner‚Äîlet‚Äôs talk at 7.‚Äù"] },
      "crossRefs": {
        "triggerwordsTags": ["reassurance","validation"],
        "therapyAdviceTags": ["validation","co-regulation","timeboxing"],
        "intensityModifierHints": []
      },
      "weights": { "base": 0.9, "multiplierProfile": "low_reactivity" }
    },

    {
      "id": "SEM_BOUNDARY",
      "key": "boundary",
      "category": "boundary",
      "description": "Limits and conditions.",
      "toneAffinities": { "alert": 0.05, "caution": 0.10, "clear": 0.20 },
      "attachmentAdjustments": { "secure": 0.06, "anxious": 0.04, "avoidant": 0.06, "disorganized": 0.04 },
      "contextLinks": ["CTX_BOUNDARY","CTX_PLANNING"],
      "match": {
        "lexical": ["that‚Äôs not okay","I need space","I can‚Äôt do X","please don‚Äôt","I won‚Äôt continue if‚Ä¶","I‚Äôm not available for that"],
        "regex": ["\\b(that'?s\\s+not\\s+ok(?:ay)?|please\\s+don'?t|i\\s+need\\s+space)\\b"],
        "spacyPatterns": [[{ "LOWER":"i"},{ "LOWER":"need"},{ "LOWER":"space"}]],
        "semanticTags": ["limit_setting"],
        "embeddingHints": ["stating limits","not okay with that"]
      },
      "negationSensitive": false,
      "intensityHooks": ["specificity bonus"],
      "rewriteCues": { "secureFix": ["Limit + rationale + follow-up option."],
        "examples": ["‚ÄúI‚Äôm not okay with late texts. Let‚Äôs talk 9‚Äì6; urgent = call.‚Äù"] },
      "crossRefs": {
        "triggerwordsTags": ["boundary","limit"],
        "therapyAdviceTags": ["boundary-secure","options-menu"],
        "intensityModifierHints": []
      },
      "weights": { "base": 1.0, "multiplierProfile": "low_reactivity" }
    },

    {
      "id": "SEM_JEALOUSY",
      "key": "jealousy",
      "category": "jealousy",
      "description": "Comparisons and threat appraisals.",
      "toneAffinities": { "alert": 0.20, "caution": 0.10, "clear": -0.05 },
      "attachmentAdjustments": { "secure": 0.00, "anxious": 0.08, "avoidant": 0.02, "disorganized": 0.06 },
      "contextLinks": ["CTX_INSECURITY","CTX_CONFLICT"],
      "match": {
        "lexical": ["who were you with","you like them more","am I not enough","why them","you‚Äôre hiding something"],
        "regex": ["\\byou\\s+like\\s+them\\s+more\\b","\\bam\\s+i\\s+not\\s+enough\\b","\\byou'?re\\s+hiding\\s+something\\b"],
        "spacyPatterns": [[{ "LOWER":"who"},{ "LOWER":"were"},{ "LOWER":"you"},{ "LOWER":"with"}]],
        "semanticTags": ["comparison_threat"],
        "embeddingHints": ["romantic threat appraisal"]
      },
      "negationSensitive": true,
      "intensityHooks": ["absolutizer","rapid-fire questions"],
      "rewriteCues": { "secureFix": ["Name the feeling + ask for a reassurance plan."],
        "examples": ["‚ÄúI felt insecure last night‚Äîcan we set expectations for texting?‚Äù"] },
      "crossRefs": {
        "triggerwordsTags": ["jealousy","comparison"],
        "therapyAdviceTags": ["attachment-safety","clarify-expectations"],
        "intensityModifierHints": ["absolutizer"]
      },
      "weights": { "base": 1.0, "multiplierProfile": "high_sensitivity" }
    },

    {
      "id": "SEM_CONTROL",
      "key": "control",
      "category": "conflict",
      "description": "Directives limiting autonomy.",
      "toneAffinities": { "alert": 0.22, "caution": 0.08, "clear": -0.05 },
      "attachmentAdjustments": { "secure": 0.00, "anxious": 0.04, "avoidant": 0.06, "disorganized": 0.05 },
      "contextLinks": ["CTX_CONFLICT","CTX_BOUNDARY"],
      "match": {
        "lexical": ["do it my way","you need to","you‚Äôre not allowed","don‚Äôt talk to them","check in every hour","send me your location"],
        "regex": ["\\byou\\s+need\\s+to\\b","\\byou'?re\\s+not\\s+allowed\\b","\\bsend\\s+me\\s+your\\s+location\\b"],
        "spacyPatterns": [[{ "LOWER":"you"},{ "LOWER":"need"},{ "LOWER":"to"}]],
        "semanticTags": ["directive_control"],
        "embeddingHints": ["controlling language"]
      },
      "negationSensitive": false,
      "intensityHooks": ["frequency mandates","deadline threats"],
      "rewriteCues": { "secureFix": ["Translate to request + rationale; offer choices."],
        "examples": ["‚ÄúCould you text when you arrive? It helps me plan dinner.‚Äù"] },
      "crossRefs": {
        "triggerwordsTags": ["command","control"],
        "therapyAdviceTags": ["collaborative-request","options-menu"],
        "intensityModifierHints": []
      },
      "weights": { "base": 1.02, "multiplierProfile": "high_sensitivity" }
    },

    {
      "id": "SEM_GASLIGHT",
      "key": "gaslighting",
      "category": "risk",
      "description": "Undermining perception; reality inversion.",
      "toneAffinities": { "alert": 0.32, "caution": 0.08, "clear": -0.10 },
      "attachmentAdjustments": { "secure": 0.00, "anxious": 0.07, "avoidant": 0.04, "disorganized": 0.08 },
      "contextLinks": ["CTX_RISK","CTX_CONFLICT"],
      "match": {
        "lexical": ["you‚Äôre imagining things","that never happened","you‚Äôre crazy","you always make things up","everyone knows you‚Äôre wrong"],
        "regex": ["\\bthat\\s+never\\s+happened\\b","\\byou'?re\\s+(crazy|imagining\\s+things)\\b"],
        "spacyPatterns": [[{ "LOWER":"you"},{ "LOWER":"always"},{ "LOWER":"make"},{ "LOWER":"things"},{ "LOWER":"up"}]],
        "semanticTags": ["reality_invalidation"],
        "embeddingHints": ["denying obvious facts"]
      },
      "negationSensitive": false,
      "intensityHooks": ["absolutizer","contempt blend"],
      "rewriteCues": { "secureFix": ["Replace global invalidation with curiosity and specifics."],
        "examples": ["‚ÄúMy memory is different; can we check messages to align?‚Äù"] },
      "crossRefs": {
        "triggerwordsTags": ["gaslighting","contempt"],
        "therapyAdviceTags": ["evidence-check","shared-recall","validation"],
        "intensityModifierHints": ["absolutizer"]
      },
      "weights": { "base": 1.08, "multiplierProfile": "high_sensitivity" }
    },

    {
      "id": "SEM_UNCERTAINTY",
      "key": "uncertainty",
      "category": "de-escalation",
      "relatedCanonical": ["emotional_regulation","hedge"],
      "description": "Hedges and tentativeness.",
      "toneAffinities": { "alert": -0.05, "caution": 0.10, "clear": 0.10 },
      "attachmentAdjustments": { "secure": 0.02, "anxious": 0.03, "avoidant": -0.01, "disorganized": 0.02 },
      "contextLinks": ["CTX_PLANNING","CTX_DISCLOSURE"],
      "match": {
        "lexical": ["maybe","I think","I guess","perhaps","sort of","kinda","not sure"],
        "regex": ["\\b(maybe|perhaps|not\\s+sure|sort\\s+of|kinda)\\b"],
        "spacyPatterns": [[{ "LOWER":"i"},{ "LOWER":"think"}]],
        "semanticTags": ["hedge"],
        "embeddingHints": ["tentative phrasing"]
      },
      "negationSensitive": false,
      "intensityHooks": ["downtoner"],
      "rewriteCues": { "secureFix": ["Pair hedge with a concrete ask/time."],
        "examples": ["‚ÄúI think Friday works‚Äîcan we lock 6pm?‚Äù"] },
      "crossRefs": {
        "triggerwordsTags": ["hedge","uncertainty"],
        "therapyAdviceTags": ["clarify-plan","specific-request"],
        "intensityModifierHints": ["downtoner"]
      },
      "weights": { "base": 0.95, "multiplierProfile": "low_reactivity" }
    },

    {
      "id": "SEM_PLANNING",
      "key": "planning",
      "category": "plan",
      "description": "Logistics, scheduling.",
      "toneAffinities": { "alert": -0.05, "caution": 0.10, "clear": 0.15 },
      "attachmentAdjustments": { "secure": 0.04, "anxious": 0.02, "avoidant": 0.03, "disorganized": 0.01 },
      "contextLinks": ["CTX_PLANNING"],
      "match": {
        "lexical": ["schedule","when works","what time","plan","calendar","reschedule","availability"],
        "regex": ["\\bwhen\\s+works\\b","\\breschedul(e|ing)\\b","\\bavailability\\b"],
        "spacyPatterns": [[{ "LOWER":"what"},{ "LOWER":"time"}]],
        "semanticTags": ["logistics"],
        "embeddingHints": ["calendar planning"]
      },
      "negationSensitive": false,
      "intensityHooks": ["numbers","dates"],
      "rewriteCues": { "secureFix": ["Offer two concrete options and confirm timezone."],
        "examples": ["‚ÄúTue 6‚Äì7 or Wed 5‚Äì6 (CT)? Your pick.‚Äù"] },
      "crossRefs": {
        "triggerwordsTags": ["plan","schedule"],
        "therapyAdviceTags": ["coordination","clarify-plan"],
        "intensityModifierHints": []
      },
      "weights": { "base": 0.9, "multiplierProfile": "low_reactivity" }
    },

    {
      "id": "SEM_VALIDATION",
      "key": "validation",
      "category": "empathy_builders",
      "legacyCategory": "validation",
      "description": "Mirroring and emotion naming.",
      "toneAffinities": { "alert": -0.10, "caution": -0.05, "clear": 0.25 },
      "attachmentAdjustments": { "secure": 0.06, "anxious": 0.06, "avoidant": 0.03, "disorganized": 0.05 },
      "contextLinks": ["CTX_REPAIR","CTX_CONFLICT"],
      "match": {
        "lexical": ["I hear you","that makes sense","I can see why","it‚Äôs valid you feel","I get why that hurt"],
        "regex": ["\\b(i\\s+hear\\s+you|that\\s+makes\\s+sense|i\\s+can\\s+see\\s+why)\\b"],
        "spacyPatterns": [[{ "LOWER":"i"},{ "LOWER":"hear"},{ "LOWER":"you"}]],
        "semanticTags": ["validation"],
        "embeddingHints": ["reflective listening"]
      },
      "negationSensitive": false,
      "intensityHooks": ["specificity bonus"],
      "rewriteCues": { "secureFix": ["Mirror one concrete detail before suggesting next step."],
        "examples": ["‚ÄúI hear you felt dismissed when I was late. Want to set an arrival window?‚Äù"] },
      "crossRefs": {
        "triggerwordsTags": ["validation","empathy"],
        "therapyAdviceTags": ["validation","reflective-listening"],
        "intensityModifierHints": []
      },
      "weights": { "base": 0.92, "multiplierProfile": "low_reactivity" }
    },

    {
      "id": "SEM_DEESCALATE",
      "key": "de-escalation",
      "category": "emergency_deescalation",
      "legacyCategory": "de-escalation",
      "description": "Cooling language and pace control.",
      "toneAffinities": { "alert": -0.20, "caution": 0.00, "clear": 0.20 },
      "attachmentAdjustments": { "secure": 0.05, "anxious": 0.05, "avoidant": 0.04, "disorganized": 0.05 },
      "contextLinks": ["CTX_CONFLICT","CTX_REPAIR"],
      "match": {
        "lexical": ["let‚Äôs slow down","can we pause","one thing at a time","I want to understand","let me make sure I got this"],
        "regex": ["\\blet'?s\\s+slow\\s+down\\b","\\bcan\\s+we\\s+pause\\b","\\bone\\s+thing\\s+at\\s+a\\s+time\\b"],
        "spacyPatterns": [[{ "LOWER":"i"},{ "LOWER":"want"},{ "LOWER":"to"},{ "LOWER":"understand"}]],
        "semanticTags": ["cooling"],
        "embeddingHints": ["slowing pace language"]
      },
      "negationSensitive": false,
      "intensityHooks": ["timeboxing","breath cue"],
      "rewriteCues": { "secureFix": ["Name the goal (understand/repair) + set a short pause or summary."],
        "examples": ["‚ÄúI want to understand. Can we pause 10 mins and regroup?‚Äù"] },
      "crossRefs": {
        "triggerwordsTags": ["de-escalation","cooling"],
        "therapyAdviceTags": ["timeboxing","co-regulation"],
        "intensityModifierHints": []
      },
      "weights": { "base": 0.9, "multiplierProfile": "low_reactivity" }
    }
  ],

  "tests": {
    "unit": [
      { "text": "This is your fault!!!", "expect": { "cluster": "blame", "tone": "alert", "route": ["boundary","emergency_deescalation"] } },
      { "text": "I‚Äôm sorry about my tone. I‚Äôll pause next time.", "expect": { "cluster": "apology", "tone": "clear", "route": ["empathy_builders"] } },
      { "text": "If you don‚Äôt answer, then we‚Äôre done.", "expect": { "cluster": "ultimatum", "tone": "alert" } },
      { "text": "maybe we lock Friday?", "expect": { "cluster": "uncertainty", "route": ["plan"] } },
      { "text": "lol you‚Äôre ridiculous üôÑ", "expect": { "cluster": "contempt", "sarcasm": true } }
    ],
    "regression": [
      "not only was it late but helpful (no negation flip)",
      "I don‚Äôt think you‚Äôre wrong (negation softens blame)"
    ]
  }
}
