{
  "version": "1.2.0",
  "notes": "Fallback-aware, additive deltas to base weights inside toneAnalysis.ts. Exact → alias → family → general → code_default.",
  "mergeStrategy": "additive_deltas",
  "bounds": { 
    "min": 0.0, 
    "max": 1.0,
    "minSuggestionWeight": -2.0,
    "maxSuggestionWeight": 3.0
  },

  "baseWeights": {
    "emo": 0.40,
    "ctx": 0.20,
    "attach": 0.15,
    "ling": 0.15,
    "intensity": 0.10,
    "negPenalty": 0.15,
    "sarcPenalty": 0.18,
    "absolutesBoost": 0.06
  },

  "fallbacks": {
    "order": ["exact", "alias", "family", "general", "code_default"],
    "telemetryEvent": "weights.fallback",
    "enabled": true,
    "envKillSwitch": "DISABLE_WEIGHT_FALLBACKS"
  },

  "aliasMap": {
    "workplace": "work",
    "work/school": "work",
    "co-parenting": "co_parenting",
    "coparenting": "co_parenting",
    "praise/recognition": "praise",
    "escalate": "escalation",
    "boundaries": "boundary",
    "money": "financial",
    "planning/schedule": "planning",
    "meta_rel": "meta",
    "presence_now": "presence"
  },

  "familyMap": {
    "CTX_CONFLICT": "conflict",
    "CTX_ESCALATION": "escalation",
    "CTX_REPAIR": "repair",
    "CTX_BOUNDARY": "boundary",
    "CTX_PLANNING": "planning",
    "CTX_SUPPORT": "support",
    "CTX_DISCLOSURE": "disclosure",
    "CTX_HUMOR": "humor",
    "CTX_INTIMACY": "intimacy",
    "CTX_NEGOTIATION": "negotiation",
    "CTX_WORK": "work",
    "CTX_MISUNDERSTANDING": "misunderstanding",
    "CTX_REQUEST": "request",
    "CTX_CRITIQUE": "critique",
    "CTX_GRATITUDE": "gratitude",
    "CTX_DECISION": "decision",
    "CTX_MEMORY": "memory",
    "CTX_PRAISE": "praise",
    "CTX_RUPTURE": "rupture",
    "CTX_REASSURANCE": "reassurance",
    "CTX_DEFENSE": "defense",
    "CTX_WITHDRAWAL": "withdrawal",
    "CTX_CO_PARENTING": "co_parenting",
    "CTX_DATING": "dating",
    "CTX_FINANCIAL": "financial",
    "CTX_SOCIAL": "social",
    "CTX_VULNERABILITY": "vulnerability",
    "CTX_PRESENCE": "presence",
    "CTX_JEALOUSY": "jealousy",
    "CTX_META": "meta",
    "CTX_ROUTINE": "routine",
    "CTX_SAFETY": "safety",
    "CTX_EMPATHY": "empathy",
    "CTX_BLAME": "blame",
    "CTX_PRACTICAL": "practical"
  },

  "byContext": {
    "general":          { "emo": 0.00, "ctx": 0.00, "attach": 0.00, "ling": 0.00, "intensity": 0.00, "negPenalty": 0.00, "sarcPenalty": 0.00, "absolutesBoost": 0.00 },

    "conflict":         { "emo": 0.05, "ctx": 0.02, "attach": 0.00, "ling": 0.02, "intensity": 0.03, "negPenalty": 0.06, "sarcPenalty": 0.05, "absolutesBoost": 0.05 },
    "escalation":       { "emo": 0.05, "ctx": 0.02, "attach": 0.00, "ling": 0.02, "intensity": 0.04, "negPenalty": 0.07, "sarcPenalty": 0.05, "absolutesBoost": 0.06 },
    "repair":           { "emo": 0.03, "ctx": 0.03, "attach": 0.01, "ling": 0.01, "intensity": -0.02, "negPenalty": -0.03, "sarcPenalty": -0.03, "absolutesBoost": -0.03 },
    "boundary":         { "emo": 0.00, "ctx": 0.04, "attach": 0.01, "ling": 0.04, "intensity": 0.02, "negPenalty": 0.02, "sarcPenalty": 0.01, "absolutesBoost": 0.02 },
    "planning":         { "emo": -0.04, "ctx": 0.06, "attach": 0.00, "ling": 0.05, "intensity": -0.02, "negPenalty": -0.02, "sarcPenalty": -0.02, "absolutesBoost": -0.04 },
    "support":          { "emo": 0.04, "ctx": 0.01, "attach": 0.01, "ling": 0.00, "intensity": -0.02, "negPenalty": -0.03, "sarcPenalty": -0.03, "absolutesBoost": -0.02 },
    "disclosure":       { "emo": 0.02, "ctx": 0.02, "attach": 0.01, "ling": 0.01, "intensity": -0.01, "negPenalty": -0.01, "sarcPenalty": 0.00, "absolutesBoost": -0.01 },
    "humor":            { "emo": 0.02, "ctx": -0.02, "attach": 0.00, "ling": 0.00, "intensity": -0.04, "negPenalty": -0.06, "sarcPenalty": -0.05, "absolutesBoost": -0.05 },
    "intimacy":         { "emo": 0.05, "ctx": 0.00, "attach": 0.01, "ling": 0.00, "intensity": -0.03, "negPenalty": -0.03, "sarcPenalty": -0.03, "absolutesBoost": -0.02 },
    "negotiation":      { "emo": -0.02, "ctx": 0.03, "attach": 0.00, "ling": 0.03, "intensity": -0.01, "negPenalty": 0.00, "sarcPenalty": 0.00, "absolutesBoost": -0.02 },
    "work":             { "emo": -0.03, "ctx": 0.03, "attach": 0.00, "ling": 0.04, "intensity": -0.02, "negPenalty": -0.02, "sarcPenalty": -0.02, "absolutesBoost": -0.02 },
    "misunderstanding": { "emo": 0.01, "ctx": 0.03, "attach": 0.00, "ling": 0.01, "intensity": 0.00, "negPenalty": 0.03, "sarcPenalty": 0.02, "absolutesBoost": -0.01 },
    "request":          { "emo": 0.00, "ctx": 0.02, "attach": 0.00, "ling": 0.02, "intensity": -0.01, "negPenalty": 0.00, "sarcPenalty": 0.00, "absolutesBoost": 0.00 },
    "critique":         { "emo": 0.00, "ctx": 0.01, "attach": 0.00, "ling": 0.02, "intensity": 0.01, "negPenalty": 0.04, "sarcPenalty": 0.03, "absolutesBoost": 0.02 },
    "gratitude":        { "emo": 0.04, "ctx": 0.00, "attach": 0.00, "ling": 0.00, "intensity": -0.03, "negPenalty": -0.03, "sarcPenalty": -0.02, "absolutesBoost": -0.02 },
    "decision":         { "emo": -0.01, "ctx": 0.02, "attach": 0.00, "ling": 0.03, "intensity": 0.00, "negPenalty": 0.00, "sarcPenalty": 0.00, "absolutesBoost": 0.00 },
    "memory":           { "emo": 0.00, "ctx": 0.01, "attach": 0.00, "ling": 0.01, "intensity": -0.01, "negPenalty": -0.01, "sarcPenalty": -0.01, "absolutesBoost": 0.00 },
    "praise":           { "emo": 0.05, "ctx": 0.00, "attach": 0.00, "ling": 0.00, "intensity": -0.03, "negPenalty": -0.03, "sarcPenalty": -0.02, "absolutesBoost": -0.02 },
    "rupture":          { "emo": 0.01, "ctx": 0.01, "attach": 0.00, "ling": 0.01, "intensity": 0.03, "negPenalty": 0.05, "sarcPenalty": 0.03, "absolutesBoost": 0.04 },
    "reassurance":      { "emo": 0.04, "ctx": 0.01, "attach": 0.00, "ling": 0.00, "intensity": -0.02, "negPenalty": -0.02, "sarcPenalty": -0.02, "absolutesBoost": -0.01 },
    "defense":          { "emo": 0.00, "ctx": 0.01, "attach": 0.00, "ling": 0.02, "intensity": 0.01, "negPenalty": 0.04, "sarcPenalty": 0.02, "absolutesBoost": 0.03 },
    "withdrawal":       { "emo": -0.01, "ctx": 0.01, "attach": 0.00, "ling": 0.00, "intensity": -0.02, "negPenalty": 0.02, "sarcPenalty": 0.01, "absolutesBoost": 0.00 },
    "co_parenting":     { "emo": -0.01, "ctx": 0.04, "attach": 0.01, "ling": 0.04, "intensity": -0.02, "negPenalty": -0.02, "sarcPenalty": -0.02, "absolutesBoost": -0.02 },
    "dating":           { "emo": 0.03, "ctx": 0.01, "attach": 0.01, "ling": 0.00, "intensity": -0.02, "negPenalty": -0.01, "sarcPenalty": -0.01, "absolutesBoost": -0.01 },
    "financial":        { "emo": -0.02, "ctx": 0.03, "attach": 0.00, "ling": 0.03, "intensity": -0.01, "negPenalty": 0.00, "sarcPenalty": 0.00, "absolutesBoost": 0.00 },
    "social":           { "emo": 0.01, "ctx": 0.00, "attach": 0.00, "ling": 0.01, "intensity": -0.01, "negPenalty": 0.00, "sarcPenalty": -0.01, "absolutesBoost": -0.01 },
    "vulnerability":    { "emo": 0.06, "ctx": 0.00, "attach": 0.01, "ling": 0.00, "intensity": -0.01, "negPenalty": -0.02, "sarcPenalty": -0.01, "absolutesBoost": -0.01 },
    "presence":         { "emo": 0.00, "ctx": 0.02, "attach": 0.00, "ling": 0.02, "intensity": -0.01, "negPenalty": 0.00, "sarcPenalty": 0.00, "absolutesBoost": -0.01 },
    "jealousy":         { "emo": 0.02, "ctx": 0.02, "attach": 0.00, "ling": 0.01, "intensity": 0.02, "negPenalty": 0.03, "sarcPenalty": 0.02, "absolutesBoost": 0.02 },
    "meta":             { "emo": 0.00, "ctx": 0.02, "attach": 0.00, "ling": 0.02, "intensity": -0.01, "negPenalty": 0.00, "sarcPenalty": 0.00, "absolutesBoost": 0.00 },
    "routine":          { "emo": 0.00, "ctx": 0.00, "attach": 0.00, "ling": 0.01, "intensity": -0.01, "negPenalty": -0.01, "sarcPenalty": -0.01, "absolutesBoost": -0.01 },
    "safety":           { "emo": 0.01, "ctx": 0.02, "attach": 0.00, "ling": 0.01, "intensity": 0.02, "negPenalty": 0.05, "sarcPenalty": 0.03, "absolutesBoost": 0.03 },
    "empathy":          { "emo": 0.05, "ctx": 0.01, "attach": 0.01, "ling": 0.01, "intensity": -0.02, "negPenalty": -0.02, "sarcPenalty": -0.02, "absolutesBoost": -0.02 },
    "blame":            { "emo": 0.03, "ctx": 0.01, "attach": 0.00, "ling": 0.02, "intensity": 0.02, "negPenalty": 0.05, "sarcPenalty": 0.03, "absolutesBoost": 0.04 },
    "practical":        { "emo": -0.02, "ctx": 0.03, "attach": 0.00, "ling": 0.03, "intensity": -0.01, "negPenalty": 0.00, "sarcPenalty": 0.00, "absolutesBoost": -0.01 }
  },

  "adviceRankOverrides": {
    "byContext": {
      "general": {
        "toneMatch": 0.10,
        "contextMatch": 0.05
      },
      "conflict": {
        "toneMatch": 0.25,
        "negationPenalty": -0.10,
        "sarcasmPenalty": -0.10,
        "phraseEdgeBoost": 0.10
      },
      "repair": {
        "contextMatch": 0.15,
        "intensityBoost": -0.10,
        "severityFit": 0.10
      },
      "planning": {
        "contextMatch": 0.20,
        "intensityBoost": -0.05,
        "toneMatch": -0.05
      }
    }
  }
}
